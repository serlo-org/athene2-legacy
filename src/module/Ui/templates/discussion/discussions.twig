<div class="tab-content">
    <ul class="timeline">
        {% if isGranted('discussion.create') %}
            {% set form = discussion().getForm('discussion', object, forum) %}
            <li>
                <div class="timeline-badge primary"><i class="glyphicon glyphicon-pencil"></i></div>
                <div class="timeline-panel">
                    <div class="timeline-body">
                        <h4>{{ translate('Start a new discussion') }}</h4>
                        <hr>
                        {% if forum %}
                            {{ form().render(form, null) }}
                        {% else %}
                        {% endif %}
                    </div>
                </div>
            </li>
        {% endif %}
        {% for discussion in discussion().getDiscussions(object) %}
            <li>
                {% include 'discussion/discussion/show' with {'discussion': discussion} only %}
            </li>
        {% else %}
            <li>
                <div class="timeline-badge"><i class="glyphicon glyphicon-remove"></i></div>
                <div class="timeline-panel">
                    <div class="timeline-body">
                        <span class="text-muted">{{ translate('There are no discussions on this topic yet.') }}</span>
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>
</div>